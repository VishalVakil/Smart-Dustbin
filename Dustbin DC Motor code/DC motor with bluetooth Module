// OPEN IN ARDUINO
// Define the pin numbers
int motorPin1 = 5;
int motorPin2 = 6;
int en1 = 4;
int limitSwitch1 = 7; // We used 2 limit switches one to end forward movement
int limitSwitch2 = 8; // Other to end the backward movement of DC motor
char data; // Comes in the form of 'F' and 's' from a Bluetooth module
int i = 0;
void setup() {
  // Set the pin modes of the above IO pins to OUTPUT
  Serial.begin(9600);
  pinMode(motorPin1, OUTPUT);
  pinMode(motorPin2, OUTPUT);
  pinMode(limitSwitch1, INPUT_PULLUP);
  pinMode(limitSwitch2, INPUT_PULLUP);
}
void loop() {
  if (Serial.available())
  {
    data = Serial.read();
    Serial.println(data);
  }
  if (data == 'F' && i == 0)
    // Turn the motor in one direction
  {
    digitalWrite(motorPin1, HIGH);
    digitalWrite(motorPin2, LOW);
    analogWrite(en1, 200);
    delay(1000);
    analogWrite(en1, 0);
    delay(1000);
    if (digitalRead(limitSwitch1) == LOW)
    {
      digitalWrite(motorPin2, LOW);
      digitalWrite(motorPin1, LOW);
      delay(2000);
      analogWrite(en1, 200);
      digitalWrite(motorPin1, LOW);
      digitalWrite(motorPin2, HIGH);
      analogWrite(en1, 0);
      delay(500);
    }
    analogWrite(en1, 0);
    delay(1000);
    if (digitalRead(limitSwitch2) == LOW)
    {
      digitalWrite(motorPin2, LOW);
      digitalWrite(motorPin1, LOW);
      analogWrite(en1, 0);
      delay(1000);
      i = 1;
    }
  }
  if(data =='S')
  {
    i=0;
  }
}
